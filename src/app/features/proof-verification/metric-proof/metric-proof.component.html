<div *ngIf="showBatchHistory; else elseBlock">
    <div id="verificationScreen" *ngIf="true" [@screenAnimationDemo] [ngStyle]="{
            height: vsHeightExpand ? maxHeight : minHeight,
            maxWidth: vsHeightExpand ? maxWidth : minWidth
          }">
        <!-- header start -->
        <div class="row justify-content-between align-items-center mb-2 mt-1">
            <div class="col-sm-12 col-md-3 col-lg-3 d-flex align-items-center justify-content-center ">
                <div class="proofbot-header-img-containerqq">
                    <img class="proofbot-header-img" src="../../../../assets/img/Asset 4.png">
                    <img class="proofbot-header-img2" src="../../../../assets/img/Asset 5.png">
                </div>
            </div>

            <div class="col-sm-12 col-md-4 col-lg-4 text-center mt-3 mb-3">
                <div class="row mb-1" style="font-size:18px; font-weight: 700; font-family: Inter;">
                    <div class="col">{{"Proof of " + metric}}</div>
                </div>
                <div class="row mt-1 justify-content-center align-item-center" style="font-size:14px">
                    <div class="col-auto" *ngIf="!!txnItem.productName">Product: <span style="font-weight:700;">{{txnItem.productName}}</span>
                    </div>
                    <div class="col-auto" *ngIf="!!batch">Batch: <span style="font-weight:700;">{{batch}}</span>
                    </div>
                    <!-- <div class="col-auto" *ngIf="!!txnItem.tdpId">TDP ID: <span style="font-weight:700;">{{txnItem.tdpId}}</span>
                    </div> -->
                    <div class="col-auto" *ngIf="!!metric">Metric: <span style="font-weight:700;">{{metric}}</span>
                    </div>
                </div>
            </div>

            <div class=" col-sm-12 col-md-3 col-lg-3">
                <div class="lang-selector responsive-content float-right text-center mx-auto">
                    <select class="custom-select w-auto" [(ngModel)]="lang"
                        style="font-size: 14px; font-family : Inter;">
                        <option value="en">English</option>
                        <option value="ja">Japanese</option>
                    </select>
                </div>
            </div>
        </div>
        <!-- header end -->

        <!-- batch-image start -->
        <div class="row">
            <div class="col-12 justify-content-center align-items-center text-center">
                <div class="card  mx-auto" style="width: 18rem;" *ngIf="!!txnItem.images">
                    <owl-carousel-o [options]="customOptions">
                        <ng-template carouselSlide *ngFor="let imageData of txnItem.images">
                          <div>
                            <img class="card-img-top" style="max-width: 100%; max-height: 100%; object-fit: contain;" alt="Card image cap" [src]="imageData.image" />
                          </div>
                        </ng-template>
                      </owl-carousel-o>
                    <!-- <img class="card-img-top"
                        src="https://images.pexels.com/photos/2081199/pexels-photo-2081199.jpeg?auto=compress&cs=tinysrgb&w=600"
                        style="max-width: 100%; max-height: 100%; object-fit: contain;" alt="Card image cap"> -->
                    <div class="card-body">
                        <p class="card-text">
                            <span class="black-highlight pl-2 pr-2 pt-1 pb-1">{{"Some quick example text: " +
                                cfResult}}</span>
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-12 text-center">
                <p>
                    <span class="card-destription">
                        {{"This is calculated based on a series of measurements/activities and application"}}
                    </span>
                </p>
            </div>
        </div>
        <!-- batch-image end -->

        <!-- poc view -->
        <div class="poc-graph-view mt-3 mb-1">
            <div class="row justify-content-center">
                <div class="bold-f" style="font-size: 16px;">Steps of the Production</div>
            </div>
            <div class="row justify-content-center">
                <div class="" style="font-size: 12px;">
                    Select a stage to view the activities related to them.
                </div>
            </div>
            <app-metric-batch-history id="collapseBasic" [collapse]="isCollapsedPocTree" class="m-2"
                [data]="nodes" (clickedNodeEvent)="clickedNode($event,$stage)"></app-metric-batch-history>
        </div>
        <!-- end poc view -->
        <!-- Activity View header -->
        <div class="row justify-content-center">
            <div class="bold-f" style="font-size: 16px;">Activities</div>
        </div>
        <div class="row justify-content-center">
            <div class="" style="font-size: 12px;">
                An activity is a specific action or event that needs to be measured in order to calculate a metric.
            </div>
        </div>
        <!-- Activity View header -->
        <!-- Stage Name -->
        <div class="row justify-content-center text-center mt-2 mb-2">
            <div class="text-center" style="font-size: 14px;">
                Showing activities for - <span class="bold-f">{{stage}}</span>
            </div>
        </div>
        <!-- Stage Name -->
        <!-- Activity Table -->
        <div class="container"*ngIf="MetricNames?.length > 0">
            <div class="row">
                <div class="col-sm-12 col-md-10 col-lg-10 col-xl-12 mx-auto">
                    <div class="table-responsive">
                        <table class="table table-border" *ngFor="let MerticName of MetricNames;">
                            <thead>
                                <tr >
                                    <th colspan="3" style="background-color: #DFDFDF; text-align: center;">{{MerticName.MetricActivityName}}</th>
                                </tr>
                            </thead>
                            <tbody *ngFor="let Mertic of AvailableMetrics;">
                                <tr *ngIf="Mertic.name == MerticName.MetricActivityName" style="text-align: left; " >
                                    <td *ngFor="let Result of Mertic.metricResults;">
                                        <span class="bold-f" >
                                        {{Result.value | number:'1.3-3'}} C02e</span></td>
                                        <td>Emission from {{Mertic.name}}</td>  
                                    <td><a *ngIf="!!currettxn"[href]="proofbotDomain + '/?type=pocf&txn=' + currettxn + '&tdpId='+ tdpId +'&batchId='+ batch " target="_blank"><span class="view-proof"style="color: #FFFFFF;">View Proof</span></a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!-- Activity Table -->
        <div class="text-center">
            <button type="button" class="btn proceed" (click)="onBack()">Back</button>
        </div>
    </div>
</div>
<ng-template #elseBlock>
    <div class="martic-backgraound">
        <app-bot-loader [initialHeight]="initialHeight" [initialWidth]="initialWidth" [color]="color" [mode]="mode"
            [value]="value" [LoadingProofType]="'Proof of '+metric" id="proofDemoLoaderFrame" *ngIf="!isStartDemo"
            style="width: 100%;" [product]="product" [batch]="batch" [tdpId]="tdpId" [metric]="metric"></app-bot-loader>
        <div class="container">
            <div class="text-center">
                <button type="button" class="btn proceed" (click)="onProceed()">Proceed</button>
            </div>
        </div>
    </div>
</ng-template>